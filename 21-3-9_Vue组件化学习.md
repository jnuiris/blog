#Vue组件化开发
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>21-3-9
<hr>
<h3>1.全局组件注册</h3>
<p>
组件注册比较简单，全局组件的注册只需要使用Vue.component就可以了
<pre>
//  组件注册
    Vue.component('button-counter', {
        data: function () {
            return {
                count: 0
            }
        },
        template: `<button @click="handle">点击了{{count}}次</button>`,
        methods: {
            handle: function () {
                this.count += 2
            }
        }
    })
    var vm = new Vue({
        el: '#app'
    })
</pre>
自定义组件可以有自己的方法，在methods里面写就可以了，通过这种方法使用的数据要用this引用。组件也可以多次复用。
</p>
<h3>
2.组件注册的注意事项
</h3>
<p>
<strong>1.</strong><br>组件注册中的data需要使用函数，会形成闭包，能保证每一个组件都拥有一份独立的数据。
<pre>
Vue.component('button-counter', {
        // data: function () {
        //     return {
        //         count: 0
        //     }
        // },
        data: {
            count: 0
        },
        template: `<button @click="handle">点击了{{count}}次</button>`,
        methods: {
            handle: function () {
                this.count += 2
            }
        }
    })
</pre>
以上的代码会报错，因为data后面必须跟方法。
</p>
<p>
<strong>2.</strong><br>组件模板的内容必须是单个根元素
<pre>
 //  组件注册
    Vue.component('button-counter', {
        data: function () {
            return {
                count: 0
            }
        },
        // data: {
        //     count: 0
        // },
        template: `<button @click="handle">点击了{{count}}次</button><button>测试</button>`,
        methods: {
            handle: function () {
                this.count += 2
            }
        }
    })
</pre>
以上代码会报编译模板错误，以上代码必须用单个根元素。
<pre>
 //  组件注册
    Vue.component('button-counter', {
        data: function () {
            return {
                count: 0
            }
        },
        // data: {
        //     count: 0
        // },
        // template: `<button @click="handle">点击了{{count}}次</button><button>测试</button>`,
        template: `<div><button @click="handle">点击了{{count}}次</button><button>测试</button></div>`,
        methods: {
            handle: function () {
                this.count += 2
            }
        }
    })
</pre>
在最外面加div就可以了。
</p>
<p>
<strong>3.</strong><br>模板字符串是ES6语法，必须要考虑浏览器兼容性问题，后面学了前端工程化之后就不用考虑这个问题了。
<pre>
  Vue.component('button-counter', {
        data: function () {
            return {
                count: 0
            }
        },
        // data: {
        //     count: 0
        // },
        // template: `<button @click="handle">点击了{{count}}次</button><button>测试</button>`,
        methods: {
            handle: function () {
                this.count += 2
            }
        }
    })
</pre>
这样的话代码的可读性会更好。
</p>
<p>
<strong>4.</strong><br>组件的命名方式，组件命名方式有两种，短横线方式和驼峰命名法。使用驼峰命名法的话，可以直接在另一个组件中引用，但是如果在根组件中使用，必须使用短横线形式，不能使用驼峰命名法。
</p>
<h3>3.局部组件注册</h3>
<p>
以局部组件注册方式注册的组件，只能在注册它的父组件中使用，别的组件不能引用，一般使用对象的方式构建组件模板，然后使用连字符方式注册组件，示例代码如下:
<pre>
var HelloWorld = {
        data: function () {
            return {
                msg: 'HelloWorld'
            }
        },
        template: '<div>{{msg}}</div>'
    };
    Vue.component('test-com', {
        template: '<div>Test<hello-world></hello-world></div>',
        // components: {
        //     'hello-world': HelloWorld
        // }
    })
    var HelloTom = {
        data: function () {
            return {
                msg: 'HelloTom'
            }
        },
        template: '<div>{{msg}}</div>'
    };
    var HelloJerry = {
        data: function () {
            return {
                msg: 'HelloJerry'
            }
        },
        template: '<div>{{msg}}</div>'
    }
    var vm = new Vue({
        el: '#app',
        data: {

        },
        components: {
            'hello-world': HelloWorld,
            'hello-tom': HelloTom,
            'hello-jerry': HelloJerry
        }
    })
</pre>
</p>
<h3>4.组件间数据交互</h3>
<p>
父组件向子组件传值，需要在子组件中引入props方式，父组件通过属性名向子组件传递参数，其中属性既可以是静态的值，也可以是v-bind。示例代码如下:
<pre>
//  父组件向子组件传值
    Vue.component('menu-item', {
        props: ['title', 'content'],
        data: function () {
            return {
                msg: '子组件本身的数据'
            }
        },
        template: '<div>{{msg + "----" + title + "----" + content}}</div>'
    })
    var vm = new Vue({
        el: '#app',
        data: {
            msg: '父组件中内容',
            ptitle: '动态绑定属性'
        }
    })
</pre>
</p>
<p>
props属性命名是有规则地，如果在props里面使用了驼峰命名法，那么在html中必须使用短横线方式，原因是dom元素不区分大小写。
示例代码:
<pre>
Vue.component('menu-item', {
        props: ['menuTitle'],
        template: '<div>{{menuTitle}}</div>'
    });
    var vm = new Vue({
        el: '#app',
        data: {
            pmsg: '父组件中内容',
            ptitle: '动态绑定属性'
        }
    })
</pre>
不过在字符串模板中是没有这种限制的。也就是说在字符串中使用组件就没有这种问题了。示例代码如下:
<pre>
Vue.component('third-com', {
        props: ['testData'],
        template: '<div>{{testData}}</div>'
    });
    Vue.component('menu-item', {
        props: ['menuTitle'],
        template: '<div>{{menuTitle}}<third-com testData="hello"></third-com></div>'
    });
    var vm = new Vue({
        el: '#app',
        data: {
            pmsg: '父组件中内容',
            ptitle: '动态绑定属性'
        }
    })
</pre>
</p>
<p>
props属性值支持以下值类型:
<ul>
<li>
字符串String
</li>
<li>
数值Number
</li>
<li>
布尔值Boolean
</li>
<li>
数组Array
</li>
<li>
对象Object
</li>
</ul>
</p>
<p>
字符串类型传递示例代码:
<pre>
  //  测试props的值类型
    Vue.component('menu-item', {
        props: ['pstr'],
        template: `<div>{{pstr}}</div>`
    });
    var vm = new Vue({
        el: '#app',
        data: {
            pmsg: '父组件中内容',
            pstr: 'hello'
        }
    })
</pre>
数值类型传递示例代码:
<pre>
Vue.component('menu-item', {
        props: ['pstr', 'pnum'],
        template: `<div><div>{{pstr}}</div><div>{{pnum}}</div></div>`
    });
    var vm = new Vue({
        el: '#app',
        data: {
            pmsg: '父组件中内容',
            pstr: 'hello'
        }
    })
</pre>
在传递属性时，把:去掉，看上去没有区别，但是本质上是有区别的。区别在于，加上冒号，typeof是num,不加冒号，typeof是String
<br>
<br>
布尔类型传递示例代码:
<pre>
Vue.component('menu-item', {
        props: ['pstr', 'pnum', 'pboo'],
        template: `<div><div>{{pstr}}</div><div>{{typeof pnum}}</div><div>{{pboo}}</div></div>`
    });
    var vm = new Vue({
        el: '#app',
        data: {
            pmsg: '父组件中内容',
            pstr: 'hello'
        }
    })
</pre>
看类型和数值类型比较相似。
<br>
<br>
Array类型示例代码:
<pre>
  //  测试props的值类型
    Vue.component('menu-item', {
        props: ['pstr', 'pnum', 'pboo', 'parr'],
        template: `<div><div>{{pstr}}</div><div>{{typeof pnum}}</div><div>{{pboo}}</div>


<ul>
<li v-for="(item, index) in parr" :key="index">{{item}}</li>
</ul></div>`

    });
    var vm = new Vue({
        el: '#app',
        data: {
            pmsg: '父组件中内容',
            pstr: 'hello',
            parr: ['apple', 'orange', 'banana']
        }
    })
</pre>
对象类型示例代码:
<pre>
 //  测试props的值类型
    Vue.component('menu-item', {
        props: ['pstr', 'pnum', 'pboo', 'parr', 'pobj'],
        template: `<div><div>{{pstr}}</div><div>{{typeof pnum}}</div><div>{{pboo}}</div>


<ul>
<li v-for="(item, index) in parr" :key="index">{{item}}</li>
</ul><div><span>{{pobj.name}}</span><span>{{pobj.age}}</span></div></div>`

    });
    var vm = new Vue({
        el: '#app',
        data: {
            pmsg: '父组件中内容',
            pstr: 'hello',
            parr: ['apple', 'orange', 'banana'],
            pobj: {
                name: 'lisi',
                age: 12
            }
        }
    })
</pre>

</p>

